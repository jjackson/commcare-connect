{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-6">
  <h1 class="text-3xl font-bold mb-4">Labs Dashboard</h1>

  <div class="bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
    <h2 class="text-xl font-semibold mb-3">Labs Tools</h2>
    <p class="text-gray-700 mb-4">Explore and manage lab data:</p>
    <div class="flex flex-wrap gap-3">
      <a href="{% url 'explorer:list' %}" class="inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
        Data Explorer
      </a>
    </div>
  </div>

  <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
    <h2 class="text-xl font-semibold mb-3">Dashboard Prototypes</h2>
    <p class="text-gray-700 mb-4">Explore different ways to visualize hierarchical program data:</p>
    <div class="flex flex-wrap gap-3">
      <a href="{% url 'labs:dashboards:dashboard_2' %}" class="inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
        Prototype 2: Accordion View
      </a>
      <a href="{% url 'labs:dashboards:dashboard_3' %}" class="inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path>
        </svg>
        Prototype 3: Tree/Sidebar
      </a>
      <a href="{% url 'labs:dashboards:dashboard_4' %}" class="inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
        </svg>
        Prototype 4: Drill-Down Tables
      </a>
    </div>
  </div>

  <div class="bg-white shadow rounded-lg p-6 mb-6">
    <h2 class="text-xl font-semibold mb-2">User Info</h2>
    <p><strong>Username:</strong> {{ user.username }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>Name:</strong> {{ user.get_full_name }}</p>
    <a href="{% url 'labs:logout' %}" class="text-blue-600 hover:underline">Logout to refresh data</a>
  </div>

  <div class="bg-white shadow rounded-lg p-6 mb-6">
    <h2 class="text-xl font-semibold mb-4">Organizations ({{ user.organizations|length }})</h2>
    {% if user.organizations %}
      <ul class="space-y-2">
        {% for org in user.organizations %}
        <li class="border-b pb-2">
          <strong>{{ org.name }}</strong> ({{ org.slug }})
          - <a href="{{ connect_url }}/a/{{ org.slug }}/" target="_blank" class="text-blue-600 hover:underline">View in Production →</a>
        </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-gray-600">No organizations found. Try logging out and back in.</p>
    {% endif %}
  </div>

  <div class="bg-white shadow rounded-lg p-6 mb-6">
    <h2 class="text-xl font-semibold mb-4">Programs ({{ user.programs|length }})</h2>
    {% if user.programs %}
      <ul class="space-y-2">
        {% for program in user.programs %}
        <li class="border-b pb-2">
          <strong>{{ program.name }}</strong> (ID: {{ program.id }})
          <br>
          <span class="text-gray-600">Org: {{ program.organization }} | Currency: {{ program.currency }}</span>
          - <a href="{{ connect_url }}/a/{{ program.organization }}/program/{{ program.id }}/" target="_blank" class="text-blue-600 hover:underline">View in Production →</a>
        </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-gray-600">No programs found.</p>
    {% endif %}
  </div>

  <div class="bg-white shadow rounded-lg p-6">
    <h2 class="text-xl font-semibold mb-4">Opportunities ({{ user.opportunities|length }})</h2>
    {% if user.opportunities %}
      <ul class="space-y-2">
        {% for opp in user.opportunities %}
        <li class="border-b pb-2">
          <strong>{{ opp.name }}</strong> (ID: {{ opp.id }})
          <br>
          <span class="text-gray-600">
            Org: {{ opp.organization }} |
            Program: {{ opp.program }} |
            Active: {{ opp.is_active|yesno:"Yes,No" }}
          </span>
          - <a href="{{ connect_url }}/a/{{ opp.organization }}/opportunity/{{ opp.id }}/" target="_blank" class="text-blue-600 hover:underline">View in Production →</a>
        </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-gray-600">No opportunities found.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
