{% extends "solicitations/public_base.html" %}
{% load static %}

{% block page_title %}Your Response - {{ response.solicitation.title }}{% endblock %}

{% block hero_title %}Your Response{% endblock %}

{% block hero_description %}
    {{ response.solicitation.title }}
{% endblock %}

{% block main_content %}
    <!-- Breadcrumb Navigation -->
    <ul class="breadcrumb mb-8">
        <li>
            <a href="{% url 'solicitations:list' %}">All Opportunities</a>
            <i class="fa-solid fa-chevron-right"></i>
        </li>
        <li>
            <a href="{% url 'solicitations:'|add:solicitation.solicitation_type|add:'_list' %}">{{ solicitation.get_solicitation_type_display }}s</a>
            <i class="fa-solid fa-chevron-right"></i>
        </li>
        <li>
            <a href="{% url 'solicitations:detail' pk=solicitation.pk %}">{{ solicitation.title|truncatechars:30 }}</a>
            <i class="fa-solid fa-chevron-right"></i>
        </li>
        <li>
            <a href="#">Your Response</a>
            <i class="fa-solid fa-chevron-right"></i>
        </li>
    </ul>

    <div class="max-w-6xl mx-auto">
        <!-- Header Card -->
        <div class="bg-white rounded-xl shadow-sm p-8 mb-8">
            <div class="flex items-start justify-between">
                <div class="flex-1">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="badge badge-md {% if solicitation.solicitation_type == 'eoi' %}primary-dark{% else %}warning-dark{% endif %}">
                            {{ solicitation.get_solicitation_type_display }}
                        </span>
                        <span class="badge badge-md
                            {% if response.status == 'submitted' %}neutral-light
                            {% elif response.status == 'under_review' %}warning-dark
                            {% elif response.status == 'accepted' %}positive-dark
                            {% elif response.status == 'rejected' %}negative-dark
                            {% else %}neutral-dark{% endif %}">
                            {{ response.get_status_display }}
                        </span>
                    </div>
                    <h1 class="text-3xl font-bold text-brand-deep-purple mb-2">Your Response</h1>
                    <p class="text-gray-600 mb-6">{{ solicitation.title }}</p>

                    <!-- Response Information -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="flex items-center text-sm text-gray-600">
                            <i class="fa-solid fa-building mr-2 text-gray-400"></i>
                            <span>{{ response.organization.name }}</span>
                        </div>
                        <div class="flex items-center text-sm text-gray-600">
                            <i class="fa-solid fa-user mr-2 text-gray-400"></i>
                            <span>{{ response.submitted_by.get_full_name|default:response.submitted_by.email }}</span>
                        </div>
                        <div class="flex items-center text-sm text-gray-600">
                            <i class="fa-solid fa-calendar mr-2 text-gray-400"></i>
                            <span>Submitted <span class="local-datetime" datetime="{{ response.submission_date|date:'c' }}">{{ response.submission_date|date:"M j, Y g:i A" }}</span></span>
                        </div>
                    </div>
                </div>

                <div class="flex items-center gap-x-4">
                    {% if can_edit %}
                        <a href="{% url 'solicitations:user_response_edit' pk=response.pk %}"
                           class="button button-md primary-dark">
                            <i class="fa-solid fa-edit mr-2"></i>
                            Edit Response
                        </a>
                    {% endif %}
                    <a href="{% url 'solicitations:detail' pk=solicitation.pk %}"
                       class="button button-md outline-style">
                        <i class="fa-solid fa-arrow-left mr-2"></i>
                        Back to Solicitation
                    </a>
                </div>
            </div>
        </div>

        <div>
            <!-- Response Answers -->
            {% include "solicitations/components/response_answers.html" with section_title="Your Answers" %}

            <!-- File Attachments -->
            {% include "solicitations/components/file_attachments.html" %}

        </div>
    </div>
{% endblock %}
