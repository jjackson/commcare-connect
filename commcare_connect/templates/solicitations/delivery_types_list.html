{% extends "solicitations/public_base.html" %}
{% load static %}

{% block page_title %}Program Types{% endblock %}

{% block hero_label %}
<span class="text-sm font-medium text-brand-cornflower-blue">
    <i class="fa-solid fa-layer-group mr-1"></i> Browse Programs
</span>
{% endblock %}

{% block hero_title %}Program Types{% endblock %}

{% block hero_description %}
Explore our program types and find solicitations that match your organization's expertise and capabilities.
{% endblock %}

{% block hero_actions %}
<a href="{% url 'solicitations:list' %}" class="button button-md primary-dark whitespace-nowrap">
    <i class="fa-solid fa-list mr-2"></i>View All Solicitations
</a>
{% endblock %}

{% block hero_info_row %}
<div class="flex items-center gap-6 pt-4 border-t border-gray-100 mt-2">
    <div class="flex items-center gap-2">
        <i class="fa-solid fa-layer-group text-brand-cornflower-blue"></i>
        <div>
            <span class="text-xs text-gray-500 block">Program Types</span>
            <span class="font-semibold text-brand-deep-purple">{{ delivery_types|length }}</span>
        </div>
    </div>
    <div class="w-px h-8 bg-gray-200"></div>
    <div class="flex items-center gap-2">
        <i class="fa-solid fa-file-alt text-brand-cornflower-blue"></i>
        <div>
            <span class="text-xs text-gray-500 block">Active Solicitations</span>
            <span class="font-semibold text-brand-deep-purple">{{ total_solicitations }}</span>
        </div>
    </div>
    <div class="w-px h-8 bg-gray-200"></div>
    <div class="flex items-center gap-2">
        <i class="fa-solid fa-rocket text-green-600"></i>
        <div>
            <span class="text-xs text-gray-500 block">Active Opportunities</span>
            <span class="font-semibold text-brand-deep-purple">{{ total_active_opportunities }}</span>
        </div>
    </div>
    <div class="w-px h-8 bg-gray-200"></div>
    <div class="flex items-center gap-2">
        <i class="fa-solid fa-check-circle text-gray-500"></i>
        <div>
            <span class="text-xs text-gray-500 block">Completed</span>
            <span class="font-semibold text-brand-deep-purple">{{ total_completed_opportunities }}</span>
        </div>
    </div>
</div>
{% endblock %}

{% block main_content %}

    <!-- Delivery Types Grid -->
    {% if delivery_types %}
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for dt in delivery_types %}
                <a href="{% url 'solicitations:delivery_type_detail' slug=dt.slug %}"
                   class="card_bg hover:shadow-lg transition-all duration-300 group">
                    <!-- Card Header with Icon -->
                    <div class="flex items-start gap-4 mb-4">
                        <div class="bg-brand-indigo/10 p-3 rounded-lg group-hover:bg-brand-indigo/20 transition-colors">
                            <i class="{{ dt.icon|default:'fa-solid fa-folder' }} text-2xl text-brand-indigo"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="card_title group-hover:text-brand-cornflower-blue transition-colors">
                                {{ dt.name }}
                            </h3>
                            <div class="flex flex-wrap gap-1 mt-1">
                                {% if dt.active_opportunities %}
                                    <span class="badge badge-sm positive-light">
                                        {{ dt.active_opportunities }} active opportunit{{ dt.active_opportunities|pluralize:"y,ies" }}
                                    </span>
                                {% endif %}
                                {% if dt.completed_opportunities %}
                                    <span class="badge badge-sm neutral">
                                        {{ dt.completed_opportunities }} completed
                                    </span>
                                {% endif %}
                                {% if dt.solicitation_count %}
                                    <span class="badge badge-sm primary-light">
                                        {{ dt.solicitation_count }} solicitation{{ dt.solicitation_count|pluralize }}
                                    </span>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Description -->
                    <p class="card_description mb-4">
                        {{ dt.description|default:"No description available."|truncatewords:25 }}
                    </p>

                    <!-- View Link -->
                    <div class="flex items-center text-brand-cornflower-blue font-medium text-sm">
                        <span>View Details</span>
                        <i class="fa-solid fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
                    </div>
                </a>
            {% endfor %}
        </div>
    {% else %}
        <!-- Empty State -->
        <div class="text-center py-12">
            <i class="fa-solid fa-folder-open text-5xl text-gray-400 mx-auto mb-4"></i>
            <h3 class="card_title mb-2">No Program Types Available</h3>
            <p class="card_description mb-6">
                Program types will appear here once they are configured.
            </p>
        </div>
    {% endif %}
{% endblock %}
