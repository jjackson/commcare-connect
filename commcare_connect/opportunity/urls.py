from django.urls import path

from commcare_connect.opportunity import views
from commcare_connect.opportunity.views import (
    OpportunityCompletedWorkTable,
    OpportunityDashboard,
    OpportunityEdit,
    OpportunityFinalize,
    OpportunityInit,
    OpportunityInitUpdate,
    OpportunityList,
    OpportunityPaymentUnitTableView,
    WorkerDeliverView,
    WorkerLearnView,
    WorkerPaymentsView,
    WorkerView,
    add_budget_existing_users,
    add_budget_new_users,
    add_payment_unit,
    add_payment_units,
    approve_visits,
    delete_form_json_rule,
    download_export,
    edit_payment_unit,
    export_catchment_area,
    export_completed_work,
    export_deliver_status,
    export_status,
    export_user_status,
    export_user_visits,
    export_users_for_payment,
    fetch_attachment,
    import_catchment_area,
    opportunity_user_invite,
    payment_delete,
    payment_import,
    payment_report,
    reject_visits,
    resend_user_invites,
    review_visit_export,
    review_visit_import,
    revoke_user_suspension,
    send_message_mobile_users,
    suspend_user,
    suspended_users_list,
    sync_deliver_units,
    update_completed_work_status_import,
    update_visit_status_import,
    user_visit_review,
    verification_flags_config,
)

app_name = "opportunity"
urlpatterns = [
    path("", view=OpportunityList.as_view(), name="list"),
    path("init/", view=OpportunityInit.as_view(), name="init"),
    path("<slug:opp_id>/init/edit/", view=OpportunityInitUpdate.as_view(), name="init_edit"),
    path("<slug:opp_id>/finalize/", view=OpportunityFinalize.as_view(), name="finalize"),
    path("<slug:opp_id>/edit", view=OpportunityEdit.as_view(), name="edit"),
    path("<slug:opp_id>/", view=OpportunityDashboard.as_view(), name="detail"),
    path("<slug:opp_id>/visit_export/", view=export_user_visits, name="visit_export"),
    path("<slug:opp_id>/visit_import/", view=update_visit_status_import, name="visit_import"),
    path("<slug:opp_id>/review_visit_export/", view=review_visit_export, name="review_visit_export"),
    path("<slug:opp_id>/review_visit_import/", view=review_visit_import, name="review_visit_import"),
    path("export_status/<slug:task_id>", view=export_status, name="export_status"),
    path("download_export/<slug:task_id>", view=download_export, name="download_export"),
    path("<slug:opp_id>/add_budget_existing_users", view=add_budget_existing_users, name="add_budget_existing_users"),
    path("<slug:opp_id>/add_budget_new_users", view=add_budget_new_users, name="add_budget_new_users"),
    path("<slug:opp_id>/payment_export/", view=export_users_for_payment, name="payment_export"),
    path("<slug:opp_id>/payment_import/", view=payment_import, name="payment_import"),
    path("<slug:opp_id>/payment_unit/create", view=add_payment_unit, name="add_payment_unit"),
    path("<slug:opp_id>/payment_units/create", view=add_payment_units, name="add_payment_units"),
    path(
        "<slug:opp_id>/payment_unit_table/", view=OpportunityPaymentUnitTableView.as_view(), name="payment_unit_table"
    ),
    path("<slug:opp_id>/payment_unit/<slug:pk>/edit", view=edit_payment_unit, name="edit_payment_unit"),
    path("<slug:opp_id>/user_status_export/", view=export_user_status, name="user_status_export"),
    path("<slug:opp_id>/deliver_status_export/", view=export_deliver_status, name="deliver_status_export"),
    path("<slug:opp_id>/user_visits/", view=views.user_visit_verification, name="user_visits_list"),
    path(
        "<slug:opp_id>/user_visit_verification_table/",
        view=views.VisitVerificationTableView.as_view(),
        name="user_visit_verification_table",
    ),
    path("<slug:opp_id>/user_visit_details/<slug:pk>/", view=views.user_visit_details, name="user_visit_details"),
    path("<slug:opp_id>/payment/<slug:access_id>/delete/<slug:pk>/", view=payment_delete, name="payment_delete"),
    path("<slug:opp_id>/send_message", view=send_message_mobile_users, name="send_message_mobile_users"),
    path("<slug:opp_id>/approve_visits", view=approve_visits, name="approve_visits"),
    path("<slug:opp_id>/reject_visits", view=reject_visits, name="reject_visits"),
    path("<slug:opp_id>/fetch_attachment/<blob_id>", view=fetch_attachment, name="fetch_attachment"),
    path(
        "<slug:opp_id>/completed_work_table/",
        view=OpportunityCompletedWorkTable.as_view(),
        name="completed_work_table",
    ),
    path("<slug:opp_id>/completed_work_export/", view=export_completed_work, name="completed_work_export"),
    path(
        "<slug:opp_id>/completed_work_import/", view=update_completed_work_status_import, name="completed_work_import"
    ),
    path("<slug:opp_id>/verification_flags_config/", view=verification_flags_config, name="verification_flags_config"),
    path("<slug:opp_id>/suspended_users/", view=suspended_users_list, name="suspended_users_list"),
    path("<slug:opp_id>/suspend_user/<slug:pk>/", view=suspend_user, name="suspend_user"),
    path(
        "<slug:opp_id>/revoke_user_suspension/<slug:pk>/", view=revoke_user_suspension, name="revoke_user_suspension"
    ),
    path("<slug:opp_id>/delete_form_json_rule/<slug:pk>/", view=delete_form_json_rule, name="delete_form_json_rule"),
    path("<slug:opp_id>/catchment_area_export/", view=export_catchment_area, name="catchment_area_export"),
    path("<slug:opp_id>/catchment_area_import/", view=import_catchment_area, name="catchment_area_import"),
    path("<slug:opp_id>/payment_report/", payment_report, name="payment_report"),
    path("<slug:opp_id>/user_visit_review/", user_visit_review, name="user_visit_review"),
    path("<slug:opp_id>/user_invite/", view=opportunity_user_invite, name="user_invite"),
    path("<slug:opp_id>/invoice/", views.invoice_list, name="invoice_list"),
    path("<slug:opp_id>/invoice/create/", views.InvoiceCreateView.as_view(), name="invoice_create"),
    path("<slug:opp_id>/invoice/<slug:pk>/review/", views.InvoiceReviewView.as_view(), name="invoice_review"),
    path("<slug:opp_id>/invoice/submit/", views.submit_invoice, name="submit_invoice"),
    path("<slug:opp_id>/invoice/approve/", views.invoice_approve, name="invoice_approve"),
    path("<slug:opp_id>/delete_invites/", views.delete_user_invites, name="delete_user_invites"),
    path("<slug:opp_id>/resend_invites/", resend_user_invites, name="resend_user_invites"),
    path("<slug:opp_id>/sync_deliver_units/", sync_deliver_units, name="sync_deliver_units"),
    # Worker List
    path("<slug:opp_id>/workers/", WorkerView.as_view(), name="worker_list"),
    path("<slug:opp_id>/workers/learn/", WorkerLearnView.as_view(), name="worker_learn"),
    path("<slug:opp_id>/workers/deliver/", WorkerDeliverView.as_view(), name="worker_deliver"),
    path("<slug:opp_id>/workers/payments/", WorkerPaymentsView.as_view(), name="worker_payments"),
    path(
        "<slug:opp_id>/worker_learn_progress/<slug:access_id>",
        views.worker_learn_status_view,
        name="worker_learn_progress",
    ),
    path("<slug:opp_id>/opportunity_delivery_stats/", views.opportunity_delivery_stats, name="delivery_stats"),
    path(
        "<slug:opp_id>/opportunity_worker_progress_stats/",
        views.opportunity_worker_progress,
        name="worker_progress_stats",
    ),
    path(
        "<slug:opp_id>/opportunity_funnel_progress_stats/",
        views.opportunity_funnel_progress,
        name="funnel_progress_stats",
    ),
    path("<slug:opp_id>/learn_module_table", views.learn_module_table, name="learn_module_table"),
    path("<slug:opp_id>/deliver_unit_table", views.deliver_unit_table, name="deliver_unit_table"),
    path(
        "<slug:opp_id>/worker_payment_history/<slug:access_id>",
        views.worker_payment_history,
        name="worker_payment_history",
    ),
    path("<slug:opp_id>/worker_flag_counts/", views.worker_flag_counts, name="worker_flag_counts"),
    path("add_api_key/", views.add_api_key, name="add_api_key"),
    path("<slug:opp_id>/exchange_rate/", views.exchange_rate_preview, name="exchange_rate"),
    path("<slug:opp_id>/invoice_items/", views.invoice_items, name="invoice_items"),
    path(
        "<slug:opp_id>/invoice_items/download/",
        views.download_invoice_line_items,
        name="download_invoice_line_items",
    ),
    path("<slug:opp_id>/visit_export_count/", views.visit_export_count, name="visit_export_count"),
]
